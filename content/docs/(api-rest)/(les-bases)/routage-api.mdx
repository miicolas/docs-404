---
title: Le routage
description: Le routage est la partie qui est importante de l'architecture d'une API REST. Il permet de dÃ©finir les diffÃ©rentes URLs qui seront utilisÃ©es pour accÃ©der aux diffÃ©rentes ressources de l'API grÃ¢ce Ã  des mÃ©thodes HTTP et mieux trier les requÃªtes.                                                                             
---

Le routage est la partie importante de l'architecture d'une API REST. Il permet de dÃ©finir les diffÃ©rentes URLs qui seront utilisÃ©es pour accÃ©der aux diffÃ©rentes ressources de l'API grÃ¢ce Ã  des mÃ©thodes HTTP.

```
â”œâ”€â”€ index.js 
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ router.js         # Routeur principal
â”‚   â””â”€â”€ users/            # Dossier des routes utilisateurs
â”‚       â”œâ”€â”€ router.js     # Routeur utilisateurs
â”‚       â”œâ”€â”€ add.js        # POST /users
â”‚       â”œâ”€â”€ get.js        # GET /users[/:id]
â”‚       â””â”€â”€ delete.js     # DELETE /users/:id
â”‚       â””â”€â”€ list.js       # GET /users

â”œâ”€â”€ node_modules/
â”œâ”€â”€ package.json
â”œâ”€â”€ package-lock.json
```

<Cards> 
    <Card icon="ğŸ”—" title="Endpoint sÃ©mantique">
    Les URLs doivent reflÃ©ter les ressources : 
    ```bash 
    /users # Collection d'utilisateurs /users/123 # Utilisateur spÃ©cifique 
    ``` 
    </Card> 
    <Card icon="ğŸ”„" title="MÃ©thodes HTTP significatives"> 
    | MÃ©thode | Action | Exemple | 
    |-----------|-----------------|-------------------------| 
    | GET | RÃ©cupÃ©rer | GET /users | 
    | POST | CrÃ©er | POST /users | 
    | PUT | Remplacer | PUT /users/123 | 
    | PATCH | Modifier partiel| PATCH /users/123 | 
    | DELETE | Supprimer | DELETE /users/123 | 
    </Card> 
</Cards>

## Le fichier router.js

Le fichier ```router.js``` est le fichier principal de routage. Il contient la configuration de l'application et permet de dÃ©finir les diffÃ©rentes routes de l'API.

```js
import { Router } from 'express';

const router = Router();

router.get('/', (req, res) => {
  res.json({ 
    status: 200,
    message: 'ğŸš€ API opÃ©rationnelle!'
  });
});

export default router;
```

**Explications du code**

- Le fichier ```router.js``` est importÃ© dans le fichier ```index.js``` pour permettre de **l'utiliser dans le fichier ```index.js```**.
- La variable ```router``` est importÃ©e depuis le module ```express``` pour permettre de **crÃ©er une instance de ```Router```**.
- La mÃ©thode ```get``` est utilisÃ©e pour dÃ©finir une route GET pour l'application. Elle prend deux paramÃ¨tres : ```req``` et ```res```. Le paramÃ¨tre ```req``` est un objet qui contient **les informations de la requÃªte HTTP**, et le paramÃ¨tre ```res``` est un objet qui contient **les informations de la rÃ©ponse HTTP**.
- La mÃ©thode ```json``` est utilisÃ©e pour **convertir le rÃ©sultat de la route en un objet JSON**.

Il y a aussi le status **HTTP 200 (OK)** qui est renvoyÃ© Ã  l'utilisateur, et **un message** qui indique que l'API est opÃ©rationnelle.


## Router pour les utilisateurs

Le fichier ```router.js``` contient la configuration de l'application et permet de dÃ©finir les diffÃ©rentes routes de l'API. Dans cet exemple, nous avons dÃ©fini une route pour l'application qui pointe vers la route ```/api/users```.

```js
import { Router } from 'express';
import AddUser from './add.js'; // [!code ++]
import DeleteUser from './delete.js'; // [!code ++]
import EditUser from './edit.js'; // [!code ++]
import GetUser from './get.js'; // [!code ++]
import ListUsers from './list.js'; // [!code ++]

const router = Router();

router.post('/add', AddUser);  // [!code ++]
router.delete('/delete', DeleteUser); // [!code ++]
router.put('/edit', EditUser); // [!code ++]
router.get('/get', GetUser); // [!code ++]
router.get('/list', ListUsers); // [!code ++]

export default router;
```

Dans notre routeur principal, nous avons dÃ©fini une route GET pour l'application qui pointe vers la route ```/users```.

```js
import { Router } from 'express';
import usersRouter from './users/router.js'; // Import de la route [!code ++]

const router = Router();

router.get('/', (req, res) => { // [!code --]
  res.json({ // [!code --]
    status: 200, // [!code --]
    message: 'ğŸš€ API opÃ©rationnelle!' // [!code --]
  }); // [!code --]
}); // [!code --]

router.use('/users', usersRouter); // [!code ++]

export default router; 

```


<Callout type="info" title="Pourquoi importer la route ?">

- ModularitÃ© : Modification d'une route sans impact global

- MaintenabilitÃ© : Fichiers spÃ©cialisÃ©s par fonctionnalitÃ©

- Ã‰volutivitÃ© : Ajout facile de nouvelles ressources

- TestabilitÃ© : Isolation des composants

</Callout>