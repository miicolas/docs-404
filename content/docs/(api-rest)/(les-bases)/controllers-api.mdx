---
title: Controllers 
description: Les contr√¥leurs sont des fonctions qui contiennent la logique m√©tier de l'application. Ils sont responsables de la gestion des requ√™tes et des r√©ponses.
---

Les contr√¥leurs sont des fonctions qui contiennent la logique m√©tier de l'application. Ils sont responsables de la gestion des requ√™tes et des r√©ponses.

## Pourquoi utiliser des contr√¥leurs ?

<Cards>

    <Card icon="üîó" title="S√©paration des pr√©occupations">
    Les contr√¥leurs permettent de s√©parer la logique m√©tier de la logique de routage.
    </Card>
    <Card icon="üì¶" title="Modularit√©">
    Les contr√¥leurs permettent de rendre l'application plus modulaire et plus facile √† maintenir.
    </Card>
    <Card icon="üîí" title="S√©curit√©">
    Les contr√¥leurs permettent de centraliser la logique m√©tier et de la s√©curiser.
    </Card>
</Cards>

## Cr√©er un contr√¥leur

### Cr√©er un fichier pour le contr√¥leur

Cr√©ez un fichier ```user.js``` dans le dossier ```controllers``` :

```js
export default class UsersController {

    static async getUsers() {
        
        const names = ['John', 'Jane', 'Bob'];
        return { status: 200, message: 'getUsers', data: names };
    }

}
```

#### Explications du code

- La classe ```UsersController``` est import√©e depuis le fichier ```user.js``` pour permettre de **l'utiliser dans le fichier ```list.js```**.
- La m√©thode ```getUsers``` est utilis√©e pour **r√©cup√©rer la liste des utilisateurs**.
- La constante ```names``` est utilis√©e pour **d√©finir une liste d'utilisateurs**.
- Et nous retournons le r√©sultat de la m√©thode ```getUsers``` en utilisant ```return```.


### Cr√©er une route pour r√©cup√©rer un utilisateur

Importez le contr√¥leur dans le fichier ```list.js``` :

```js
import UsersController from '../controllers/user.js'; // Import de la classe [!code ++]

export default async function ListUsers(req, res) {
    try{
        const users = await UsersController.getUsers(); // [!code ++]
        res.status(200).json(users); // [!code ++]
    } catch (error) {
        res.status(500).json({ 
            status: 500,
            message: 'üí• Une erreur est survenue lors de la r√©cup√©ration des utilisateurs'
        });
    }
}
```

## Tester la route

Pour tester la route, ex√©cutez la commande suivante :

```bash
npm run dev
```

Vous pouvez maintenant acc√©der √† votre API en utilisant l'URL suivante :

```bash
http://localhost:3000/api/users/list
```

Vous devriez voir le message suivant :

```json 
{
  "status": 200,
  "message": "getUsers",
  "data": [
    "John",
    "Jane",
    "Bob"
  ]
}
```


## Explications du code

- La classe ```UsersController``` est import√©e depuis le fichier ```user.js``` pour permettre de **l'utiliser dans le fichier ```list.js```**.
- La m√©thode ```getUsers``` est utilis√©e pour **r√©cup√©rer la liste des utilisateurs**.
- La m√©thode ```json``` est utilis√©e pour **convertir le r√©sultat de la route en un objet JSON**.

Il y a aussi le status **HTTP 200 (OK)** qui est renvoy√© √† l'utilisateur, et **un message** qui indique que l'API est op√©rationnelle.  


## Pour aller plus loin

Semaine prochaine, nous allons voir comment **cr√©er des routes pour ajouter, modifier et supprimer des utilisateurs** avec une DATABASE ! üöÄ

